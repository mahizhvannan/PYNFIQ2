FROM centos:7

RUN yum update -y
 
RUN yum group install -y "Development Tools" && \
    yum install -y cmake

ADD NFIQ2 /NFIQ2

RUN mkdir /NFIQ2/libOpenCV
RUN cd /NFIQ2/libOpenCV && \
    cmake -D CMAKE_MAKE_PROGRAM=make /NFIQ2/OpenCV/

RUN make -C /NFIQ2/libOpenCV \
    opencv_core opencv_ts opencv_imgproc opencv_highgui opencv_flann \
    opencv_features2d opencv_calib3d opencv_ml opencv_video opencv_objdetect \
    opencv_contrib opencv_nonfree opencv_gpu opencv_photo opencv_stitching opencv_videostab


RUN make -C /NFIQ2

ENV LD_LIBRARY_PATH=/NFIQ2/biomdi/common/lib:/NFIQ2/biomdi/fingerminutia/lib:/NFIQ2/libOpenCV/lib:/NFIQ2/NFIQ2/NFIQ2Algorithm/lib
